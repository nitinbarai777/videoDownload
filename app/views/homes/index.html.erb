<%= form_tag('', {:method => :get}) do %>
  <%= text_field_tag "videoUrl" %>
  <%= button_tag "button",id: 'loadVideo'%>
  <%= button_tag "Download",id: 'Download' %>
  <div id="videoFrame" style="display: none">
    <iframe width="420" height="315"
      src="" id="loadFrame">
    </iframe>
  </div>
<% end %>

<script type="text/javascript">
  $("#loadVideo").click(function(e){
    url = $("#videoUrl").val()
    loadVideo(url)
    e.preventDefault();  
  })

  function loadVideo(url){
    console.log(url);
    if (url.split('/')[2] == "www.youtube.com"){
      videoId = url.split("=").pop()
      document.getElementById("loadFrame").src = "https://www.youtube.com/embed/"+ videoId;
    }else if(url.split('/')[2] == "vimeo.com"){
      // https://vimeo.com/206024794
      // api = https://vimeo.com/api/oembed.json?url=https%3A//vimeo.com/76979871
      videoId = url.split("/").pop()
      document.getElementById("loadFrame").src = "https://player.vimeo.com/video/"+ videoId;
    }else{ 
      document.getElementById("loadFrame").src = url
    }
    $("#videoFrame").show();
  }
</script>
